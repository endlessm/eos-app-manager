<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">

<!-- Copyright 2014 Endless Mobile, Inc. -->

<node>
  <!--
      com.endlessm.AppManager:
      @short_description: The EOS Application Manager service

      This is the interface you use to talk with the EOS Application Manager.
  -->
  <interface name="com.endlessm.AppManager">

    <!--
	AvailableUpdates as read-only:

	Specifies the list of updates currently available by app_id
    -->
    <property name="AvailableUpdates" type="as" access="read">
      <annotation name="org.freedesktop.DBus.Property.EmitsChangedSignal" value="true" />
    </property>

    <!--
          AvailableApplicationsChanged (as available_applications):

	  A signal to which other processes can subscribe, indicating that the
	  list of available applications has been updated. The passed-in array
	  of strings is the new value returned by ListAvailable()
    -->
    <signal name="AvailableApplicationsChanged">
      <arg type="a(sss)" direction="out" />
      <arg type="a(sss)" direction="out" />
    </signal>

    <!--
         GetUserCapabilities:

         Retrieves a list of capabilities for the UID that called
         this method.

         The returned array of key, value pairs has the following
         keys and value types:

          * "CanInstall", bool
          * "CanUpdate", bool
          * "CanUninstall", bool
    -->
    <method name="GetUserCapabilities">
      <annotation name="org.freedesktop.DBus.GLib.Async" value="" />
      <arg type="a{sv}" name="capabilities" direction="out">
        <annotation name="org.freedesktop.DBus.GLib.ReturnVal" value="error" />
      </arg>
    </method>

    <!--
	Refresh:

        Refreshes the package database.
    -->
    <method name="Refresh" >
      <annotation name="org.freedesktop.DBus.GLib.Async" value="" />
      <arg type="b" direction="out">
	<annotation name="org.freedesktop.DBus.GLib.ReturnVal" value="error" />
      </arg>
    </method>

    <!--
	Install:

        Installs a package.
    -->
    <method name="Install" >
      <annotation name="org.freedesktop.DBus.GLib.Async" value="" />
      <arg type="s" direction="in" />
      <arg type="o" direction="out">
	<annotation name="org.freedesktop.DBus.GLib.ReturnVal" value="error" />
      </arg>
    </method>

    <!--
	Uninstall:

        Uninstalls a package.
    -->
    <method name="Uninstall" >
      <annotation name="org.freedesktop.DBus.GLib.Async" value="" />
      <arg type="s" direction="in" />
      <arg type="b" direction="out">
        <annotation name="org.freedesktop.DBus.GLib.ReturnVal" value="error" />
      </arg>
    </method>

    <!--
	ListAvailable:

        Returns a list of all applications available for installation
        and for updates.
    -->
    <method name="ListAvailable" >
      <annotation name="org.freedesktop.DBus.GLib.Async" value="" />
      <arg type="a{sv}" direction="in" />
      <arg type="a(sss)" direction="out" />
      <arg type="a(sss)" direction="out" />
    </method>

    <!--
	ListInstalled:

        Returns a list of all the installed applications.
    -->
    <method name="ListInstalled" >
      <annotation name="org.freedesktop.DBus.GLib.Async" value="" />
      <arg type="a(sss)" direction="out" />
    </method>

    <!--
	Quit:

	Suggest to the daemon to quit.
    -->
    <method name="Quit" />

    <!--
	Cancel:

	Suggest to the daemon to cancel the current transaction.
    -->
    <method name="Cancel" />

  </interface>
</node>
